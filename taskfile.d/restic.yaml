version: '3'

tasks:

  backup:windows:
    desc: "Backup Windows ${RESTIC_REPOSITORY RESTIC_PASSWORD}"
    dir: "{{.USER_WORKING_DIR}}"
    cmds:
      - >
        restic backup
        -v
        --no-lock
        --ignore-ctime
        --ignore-inode
        --pack-size 64
        --iexclude '.import_linter_cache/'
        --iexclude '.mypy_cache/'
        --iexclude '.pdm-build/'
        --iexclude '.ruff_cache/'
        --iexclude '.venv/'
        --iexclude '__pycache__/'
        --iexclude '__pypackages__/'
        --iexclude 'Lib/site-packages/'
        --iexclude 'virtualenvwrapper/*'
        --iexclude 'pipx/.cache/'
        --iexclude 'pipx/venvs/'
        --iexclude 'pdm/Cache/'
        --iexclude '.gradle/'
        --iexclude '.tmp/'
        --iexclude '.pnpm-store/'
        --iexclude 'node_modules/'
        --iexclude 'yarn/*/cache/*'
        --iexclude 'yarn/*/mirror/*'
        --iexclude 'Cache/Cache_Data/'
        --iexclude 'PackageCache/'
        --iexclude 'go/bin/'
        --iexclude 'go/pkg/'
        --iexclude 'micromamba/pkgs/'
        --iexclude 'VirtualBox VMs/*'
        --iexclude 'desktop.ini'
        --iexclude 'HiSuite/ROM/*'
        --iexclude 'MuseScore4/SoundFonts/*'
        --iexclude 'PowerShell/Help'
        --iexclude 'PowerShell/Modules'
        --iexclude 'WindowsPowerShell/Help'
        --iexclude 'WindowsPowerShell/Modules'
        --iexclude 'AppData/Local/BraveSoftware/Brave-Browser/Application/'
        --iexclude 'AppData/Local/cache/'
        --iexclude 'AppData/Local/conda/'
        --iexclude 'AppData/Local/D3DSCache/'
        --iexclude 'AppData/Local/DBeaver/'
        --iexclude 'AppData/Local/Docker/'
        --iexclude 'AppData/Local/Docker Desktop Installer/'
        --iexclude 'AppData/Local/EevisionDownload/'
        --iexclude 'AppData/Local/electron/'
        --iexclude 'AppData/Local/electron-builder/'
        --iexclude 'AppData/Local/hatch/Cache/'
        --iexclude 'AppData/Local/hatch/env/'
        --iexclude 'AppData/Local/hatch/pythons/'
        --iexclude 'AppData/Local/nvim-data/'
        --iexclude 'AppData/Local/rancher-desktop/'
        --iexclude 'AppData/Local/restic/'
        --iexclude 'AppData/LocalLow/Temp/'
        --iexclude 'AppData/Roaming/Tencent/WeMeet/Global/'
        --iexclude 'AppData/Roaming/Listary/Cache/'
        --iexclude '.local/share/wezterm/gui-sock*'
        --iexclude '.cache/'
        --iexclude '.conda/envs/*'
        --iexclude '.codeium/'
        --iexclude '.bgmi/bangumi/'
        --iexclude '.bgmi/tmp/'
        --iexclude '.emacs.d/.cache/'
        --iexclude '.emacs.d/.local/'
        --iexclude '.kube/cache/'
        --iexclude '.lingma/'
        --iexclude '.local/bin/*'
        --iexclude '.version-fox/cache/*'
        --iexclude 'GPUCache/'
        --iexclude 'Typora/Cache/'
        --iexclude 'Typora/Code Cache/'
        --iexclude 'Typora/GPUCache/'
        --iexclude 'Mega Limited/MEGAsync/logs/'
        --iexclude 'Mega Limited/MEGAsync/update/'
        --iexclude 'YACReader/*/Cache/'
        --iexclude 'thprac/crashdump/'
        --iexclude 'PDFelement 7/AutoSave/'
        --iexclude 'PDFelement 7/Log/'
        --iexclude 'Adobe Dreamweaver CC 2018 Portable/Data/'
        --iexclude 'CloudMusic/Netease/CloudMusic/*/'
        --iexclude 'Ditto/Ditto.db'
        --iexclude 'Emby/programdata/cache/'
        --iexclude 'Emby Theater/cache/'
        --iexclude 'FSViewer/FSViewer.db'
        --iexclude 'MPV/portable_config/*cache/'
        --iexclude 'mpvnet/portable_config/*cache/'
        --iexclude 'MeGUI/update_cache/*'
        --iexclude 'obsidian/DawnCache/'
        --iexclude 'RunningCheese_Firefox*/Cache/'
        --iexclude 'Rime/build/'
        --iexclude 'scoop/cache/*'
        --iexclude 'scoop/buckets/*'
        --iexclude 'scoop/apps/*'
        --iexclude 'scoop/modules/*'
        --iexclude 'scoop/workspace/*'
        --iexclude 'User Data/Default/Cache/*'
        --iexclude 'User Data/Default/Code Cache/*'
        --iexclude 'bitwarden-appdata/'
        --iexclude 'catsxp/Cache/*'
        --iexclude 'centbrowser/User Data/Default/Cache/*'
        --iexclude 'centbrowser/User Data/Default/Code Cache/*'
        --iexclude 'io.github.clash-verge-rev.clash-verge-rev/logs/*'
        --iexclude 'everything/*/Everything.db'
        --iexclude 'Everything.db'
        --iexclude '.cargo/registry/*'
        --iexclude 'ppsspp/memstick/PSP/GAME/*'
        --iexclude 'rye/py/*'
        --iexclude 'steamapps/common/'
        --iexclude 'tealdear/cache/*'
        --iexclude 'telegram/tdata/user_data*/'
        --iexclude 'virtualbox-with-extension-pack-np/'
        --iexclude 'vscode/data/'
        --iexclude 'vscodium/data/'
        --iexclude 'winfsp-np/'
        --iexclude 'zeal/docsets/'
        'C:/ProgramData/Microsoft/Windows/Start Menu/'
        'C:/Users/{{.USERNAME}}/AppData/Roaming/Microsoft/VisualStudio/'
        'C:/Users/{{.USERNAME}}/AppData/Roaming/Microsoft/Windows/PowerShell/'
        'C:/Users/{{.USERNAME}}/AppData/Roaming/Microsoft/Windows/Start Menu/'
        {{.CLI_ARGS}}
